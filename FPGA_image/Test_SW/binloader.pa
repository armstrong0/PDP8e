/ TITLE "AUTOMATIC DISASSEMBLY OF /home/armstrong/PDP8/so-much-stuff.com/pdp8/tapes/dec/dec-08-lbaa-pm BY D8TAPE"
////////////////////////////////////////////////////////////////////////////////
/
/   Automatic Disassembly of /home/armstrong/PDP8/so-much-stuff.com/pdp8/tapes/dec/dec-08-lbaa-pm
/   Generated 2021 05 30 15:00:12
/   Generated by d8tape version 0.352
/   Visit http://www.pdp12.org/pdp8/software/index.html for updates
/
/   Comments typed in from DEC-O8-LBAA-D
/   0145 locations used, 0116 code and 0027 data
////////////////////////////////////////////////////////////////////////////////
 //   field 0
*7612
SWITCH,  0000      / 
MEMTEM,  0000      / 
CHAR,    0000      / 
CHKSUM,  0000      / 
ORIGIN,  0000     / 
      1212
      7402
      7402
      7402
      7402
      7402
      7402

 
 *7626
////////////////////////////////////////////////////////////////////////////////
/
/   SUBROUTINE:  BEGG
/
////////////////////////////////////////////////////////////////////////////////
BEGG,
    0 / return area
    DCA   SWITCH   / set switch
    JMS   READ     / get a character  
    TAD   M376     / test for 377 
    SPA SNA CLA    /   
    JMP   .+4      / no 
    ISZ   SWITCH   / yes compliment switch 
    CMA      
    JMP   BEGG+1   
    TAD   SWITCH   / not 377 
    SZA CLA        / is switch set? 
    JMP   BEGG+2   /  yes, ingore
    TAD   CHAR     / no, test for code
    AND   MASK     / types
    TAD   M200   
    SPA       
    ISZ   BEGG     / data or origin  
    SPA SNA CLA    /   
    JMP I BEGG     / data, origin or L/T return    
    TAD   CHAR     / field setting  
    AND   FMASK    /   
    TAD   CHANGE   /   
    DCA   MEMTEM   /   
    JMP   BEGG+2   /  continue input   
FMASK,  0070   /   
CHANGE,  6201  / CDF0  

////////////////////////////////////////////////////////////////////////////////
/
/   SUBROUTINE:  READ
/
////////////////////////////////////////////////////////////////////////////////
READ,
    0   / return area
    0000       
LOR,
    KSF / Skip if keyboard flag is a 1.    
    JMP   LOR   /   
    KRB / Clear AC, clear keyboard flag, and r  
    DCA   CHAR  /   
    TAD   CHAR  /   
    JMP I READ  / return    
HIR,    RSF / Skip if reader flag is a 1.   
    JMP   HIR   /   
    6016    /   
    JMP   LOR+3  /    
MASK,  0300 /   
BEND,
    JMS   ASSEMB    /   
    CIA /   
    TAD   CHKSUM    /  
M376,  HLT /    
BEGIN,
    KCC / Clear AC and clear keyboard flag. 
    RFC / Clear reader flag and reader buffer,  
    RDF / Read data field into AC6-8.  Bit 0-5  
    TAD   CHANGE    /   
    DCA   MEMTEM    / save field instruction
    LAS / 
    SMA CLA / 
    TAD   HIRI  /    
    TAD   LORI  /  
    DCA   READ+1 
    JMS   BEGG     
    JMP  .-1     / ignore header
GO,
    DCA   CHKSUM    / 
    TAD   MEMTEM    /    
    DCA   MEMFLD    /   
    TAD   CHAR      /  
    DCA   WORD1   
    JMS   READ  / 
    DCA   WORD2 /    
    JMS   BEGG  /   look ahead
    JMP   BEND  /  trailer end
    JMS   ASSEMB    / 
    SNL /    
    JMP   MEMFLD    /   
    DCA   ORIGIN    /  
CHEX,    TAD   WORD1   
    TAD   WORD2 / 
    TAD   CHKSUM    /    
    JMP   GO    /   
MEMFLD,  6201   / CDF0  
    DCA I ORIGIN / 
    ISZ   ORIGIN /  
M200,  7600 / 7600  
    JMP   CHEX /   

////////////////////////////////////////////////////////////////////////////////
/
/   SUBROUTINE:  ASSEMB
/
////////////////////////////////////////////////////////////////////////////////
ASSEMB,
    0  / return area
    TAD   WORD1   
    CLL RTL    /   
    RTL    /   
    RTL    /   
    TAD   WORD2    /   
    JMP I ASSEMB   / return    
LORI,  5262    / JMP   LOR   
HIRI,  0006    / 
   0000
WORD2, 0   


       0000   /    
*7776   
WORD1,  0000
    JMP   BEGIN    /   

$
